
from rust.std.fs import read_dir

@extern(path="std::vec::Vec")
class Vector:
    pass

def test_dynamic_macro():
    # Should transpile to: let entries = quiche::call!(read_dir, String::from("."));
    entries = read_dir(".")
    
    for entry in entries:
        if entry.path().is_dir():
            print(entry.file_name())
    
def test_extern_binding():
    # Should use std::vec::Vec
    v = Vector.new()
    v.push(10)
    v.push(20)
    print(v.len())
    assert(v.len() == 2)

test_dynamic_macro()
test_extern_binding() 
