# Test for reference type annotations
# Ensures ref[T] and mutref[T] are correctly translated to &T and &mut T

def modify_list(x: mutref[Vec[i32]]):
    """Takes a mutable reference and modifies the list"""
    x.push(42)

def sum_list(items: ref[Vec[i32]]) -> i32:
    """Takes an immutable reference to a list and sums values"""
    total: i32 = 0
    for item in items.clone():
        total = total + item
    return total

def test_ref_types():
    """Test that ref and mutref type annotations work correctly"""
    
    # Test mutref[Vec[T]] - mutable reference to list
    numbers: Vec[i32] = [1, 2, 3]
    modify_list(mutref(numbers))
    assert numbers.len() == 4
    assert numbers[3] == 42
    
    # Test ref[Vec[T]] - immutable reference to list
    total = sum_list(ref(numbers))
    assert total == 48  # 1 + 2 + 3 + 42
    
    print("test_ref_types: PASSED")

def main():
    test_ref_types()
